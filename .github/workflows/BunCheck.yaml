name: my-workflow
on:
  push:
    branches:
      - dev
      - staging
      - production
  pull_request:
    branches:
      - dev
      - staging
      - production
jobs:
  build:
    name: build
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: 1.1.4
      - name: Run Build Check
        run: |
          cd rxt
          bun build --entrypoints "./index.ts" "./packages/client/index.ts" "./packages/server/index.ts" "./packages/public/index.ts" "./packages/db/index.ts" --outdir "./dist" --format "esm" --minify --target "bun" --splitting
          bun run ./dist/index.js
          exit 0
